{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport database from '../../db.json';\nimport axios from 'axios';\n\nvar randomToken = function randomToken() {\n  return Math.random().toString(36).substr(2);\n};\n\nexport default function handle(req, res) {\n  console.log('reqest ==>>>>', req);\n  var method = req.method,\n      body = req.body;\n  console.log('body', req.body); // The request body\n\n  console.log('query', req.query); // The url querystring\n\n  console.log('cookies', req.cookies); // The passed cookies\n\n  console.log('method', req.method); // The passed cookies\n\n  if (method === 'GET') {\n    res.send({\n      title: 'Hellos World'\n    });\n  }\n\n  if (method === 'POST') {\n    var user = database.users.find(function (value) {\n      return value.email === body.email && value.password === body.password;\n    });\n\n    if (user) {\n      res.send(_objectSpread({}, user, {\n        token: randomToken() + randomToken()\n      }));\n    } else {\n      res.status(401).send('Unauthorized');\n    }\n  }\n}","map":{"version":3,"sources":["D:\\project\\next-v-9\\pages\\api\\auth.js"],"names":["database","axios","randomToken","Math","random","toString","substr","handle","req","res","console","log","method","body","query","cookies","send","title","user","users","find","value","email","password","token","status"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,eAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAClBC,IAAI,CAACC,MAAL,GACGC,QADH,CACY,EADZ,EAEGC,MAFH,CAEU,CAFV,CADkB;AAAA,CAApB;;AAKA,eAAe,SAASC,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,GAA7B;AADuC,MAE/BI,MAF+B,GAEdJ,GAFc,CAE/BI,MAF+B;AAAA,MAEvBC,IAFuB,GAEdL,GAFc,CAEvBK,IAFuB;AAGvCH,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBH,GAAG,CAACK,IAAxB,EAHuC,CAGT;;AAC9BH,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBH,GAAG,CAACM,KAAzB,EAJuC,CAIP;;AAChCJ,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,GAAG,CAACO,OAA3B,EALuC,CAKH;;AACpCL,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,GAAG,CAACI,MAA1B,EANuC,CAML;;AAElC,MAAIA,MAAM,KAAK,KAAf,EAAsB;AACpBH,IAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAT;AACD;;AAED,MAAIL,MAAM,KAAK,MAAf,EAAuB;AACrB,QAAMM,IAAI,GAAGlB,QAAQ,CAACmB,KAAT,CAAeC,IAAf,CACX,UAAAC,KAAK;AAAA,aAAIA,KAAK,CAACC,KAAN,KAAgBT,IAAI,CAACS,KAArB,IAA8BD,KAAK,CAACE,QAAN,KAAmBV,IAAI,CAACU,QAA1D;AAAA,KADM,CAAb;;AAGA,QAAIL,IAAJ,EAAU;AACRT,MAAAA,GAAG,CAACO,IAAJ,mBAAcE,IAAd;AAAoBM,QAAAA,KAAK,EAAEtB,WAAW,KAAKA,WAAW;AAAtD;AACD,KAFD,MAEO;AACLO,MAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBT,IAAhB,CAAqB,cAArB;AACD;AACF;AACF","sourcesContent":["import database from '../../db.json'\r\nimport axios from 'axios'\r\n\r\nconst randomToken = () =>\r\n  Math.random()\r\n    .toString(36)\r\n    .substr(2)\r\n\r\nexport default function handle(req, res) {\r\n  console.log('reqest ==>>>>', req)\r\n  const { method, body } = req\r\n  console.log('body', req.body) // The request body\r\n  console.log('query', req.query) // The url querystring\r\n  console.log('cookies', req.cookies) // The passed cookies\r\n  console.log('method', req.method) // The passed cookies\r\n\r\n  if (method === 'GET') {\r\n    res.send({ title: 'Hellos World' })\r\n  }\r\n\r\n  if (method === 'POST') {\r\n    const user = database.users.find(\r\n      value => value.email === body.email && value.password === body.password,\r\n    )\r\n    if (user) {\r\n      res.send({ ...user, token: randomToken() + randomToken() })\r\n    } else {\r\n      res.status(401).send('Unauthorized')\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}